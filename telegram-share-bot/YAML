# ============================================
# Render Blueprint - Telegram Share Bot
# ============================================
# Ce fichier configure automatiquement le déploiement sur Render
# Documentation: https://render.com/docs/blueprint-spec

services:
  # Service principal - Bot Telegram
  - type: worker
    name: telegram-share-bot
    env: docker
    dockerfilePath: ./Dockerfile
    region: frankfurt  # ou oregon, singapore, ohio
    plan: starter  # starter ($7/mois) ou standard ($25/mois)
    
    # Variables d'environnement
    envVars:
      # Tokens Telegram (à configurer dans le dashboard Render)
      - key: BOT_USER_TOKEN
        sync: false
      - key: BOT_ADMIN_TOKEN
        sync: false
      
      # Base de données PostgreSQL (fournie par Render)
      - key: DATABASE_URL
        fromDatabase:
          name: telegram-bot-db
          property: connectionString
      
      # Cloudinary (optionnel - pour les vidéos)
      - key: CLOUDINARY_CLOUD_NAME
        sync: false
      - key: CLOUDINARY_API_KEY
        sync: false
      - key: CLOUDINARY_API_SECRET
        sync: false
      
      # Admin Telegram ID
      - key: ADMIN_TELEGRAM_ID
        sync: false
      
      # Environnement
      - key: ENVIRONMENT
        value: production

  # Base de données PostgreSQL
databases:
  - name: telegram-bot-db
    databaseName: telegram_share_bot
    plan: starter  # starter (gratuit 90 jours) ou basic ($7/mois)
    region: frankfurt